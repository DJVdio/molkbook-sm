server:
  port: 8080

spring:
  application:
    name: molkbook-backend

  datasource:
    url: jdbc:mysql://${DB_HOST:localhost}:${DB_PORT:3306}/${DB_NAME:molkbook}?useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true&createDatabaseIfNotExist=true
    username: ${DB_USERNAME:root}
    password: ${DB_PASSWORD:root}
    driver-class-name: com.mysql.cj.jdbc.Driver

  sql:
    init:
      mode: always
      continue-on-error: true

  jpa:
    hibernate:
      ddl-auto: update
    show-sql: false
    defer-datasource-initialization: true
    properties:
      hibernate:
        dialect: org.hibernate.dialect.MySQL8Dialect
        format_sql: true

  jackson:
    default-property-inclusion: non_null
    serialization:
      write-dates-as-timestamps: false

# SecondMe API Configuration
secondme:
  api:
    base-url: https://app.mindos.com/gate/lab
    oauth:
      client-id: ${SECONDME_CLIENT_ID:}
      client-secret: ${SECONDME_CLIENT_SECRET:}
      redirect-uri: ${SECONDME_REDIRECT_URI:http://localhost:8080/api/auth/oauth/callback}

# JWT Configuration - JWT_SECRET 环境变量必须设置，无默认值
jwt:
  secret: ${JWT_SECRET}
  expiration: 86400000  # 24 hours in milliseconds

# CORS Configuration - 生产环境必须设置正确的域名
cors:
  allowed-origins: ${CORS_ALLOWED_ORIGINS:http://localhost:3000,http://localhost:5173}

# Scheduler Configuration
scheduler:
  post-generation:
    enabled: true
    cron: "0 0 * * * *"  # Every hour
  comment-generation:
    enabled: true
    cron: "0 30 * * * *"  # Every hour at :30
  like-generation:
    enabled: true
    cron: "0 15 * * * *"  # Every hour at :15

logging:
  level:
    com.molkbook: DEBUG
    org.springframework.web: INFO
